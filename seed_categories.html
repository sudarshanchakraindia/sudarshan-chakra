<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>SC ‚Äî Restore & Merge Categories</title>
<style>
body { font-family: sans-serif; max-width: 600px; margin: 40px auto; padding: 20px; text-align: center; }
.btn { color: white; border: none; padding: 14px 30px; border-radius: 12px; font-size: 16px; font-weight: 700; cursor: pointer; margin: 6px; display: inline-block; }
.orange { background: #EA580C; }
.blue { background: #2563EB; }
#log { margin-top: 20px; text-align: left; background: #f1f5f9; border-radius: 10px; padding: 16px; font-size: 13px; font-family: monospace; min-height: 120px; white-space: pre-wrap; max-height: 500px; overflow-y: auto; }
</style>
</head>
<body>
<div style="font-size:48px">üî±</div>
<h2>Sudarshan Chakra ‚Äî Category Restore</h2>
<p>Restores all 9 original categories + keeps all 11 ITI categories = <strong>20 total</strong></p>
<button class="btn orange" onclick="restoreAndMerge()">üîÄ Restore All + Keep ITI</button>
<button class="btn blue" onclick="showCurrent()">üëÅÔ∏è Show Current Firebase</button>
<div id="log">Ready...</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getDatabase, ref, set, get } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

const firebaseConfig = {
            apiKey: "AIzaSyDr0jgOBiQ59F8CFZK0dnqgkG3ljjJu3P4",
            authDomain: "sudarshan-chakra-b0ac1.firebaseapp.com",
            databaseURL: "https://sudarshan-chakra-b0ac1-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "sudarshan-chakra-b0ac1",
            storageBucket: "sudarshan-chakra-b0ac1.firebasestorage.app",
            messagingSenderId: "357210144411",
            appId: "1:357210144411:web:b440a94cf78b04b58b103e"
        };
const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

const OLD_CATEGORIES = [
            {
                id: 'cat1',
                name: { en: 'Home Services' },
                icon: 'üè†',
                subcategories: [
                    {
                        name: { en: 'Plumber' }, icon: 'üîß',
                        subsubcategories: [
                            { name: { en: 'Pipe Repair' }, icon: 'üîß' },
                            { name: { en: 'Tap/Faucet Repair' }, icon: 'üö∞' },
                            { name: { en: 'Tank Installation' }, icon: 'üíß' },
                            { name: { en: 'Bathroom Fitting' }, icon: 'üöø' },
                            { name: { en: 'Drainage Cleaning' }, icon: 'ü™£' }
                        ]
                    },
                    {
                        name: { en: 'Electrician' }, icon: '‚ö°',
                        subsubcategories: [
                            { name: { en: 'Wiring & Rewiring' }, icon: 'üîå' },
                            { name: { en: 'Fan Installation' }, icon: 'üåÄ' },
                            { name: { en: 'Light Installation' }, icon: 'üí°' },
                            { name: { en: 'Switchboard Repair' }, icon: 'üî≤' },
                            { name: { en: 'Appliance Repair' }, icon: 'üîß' }
                        ]
                    },
                    {
                        name: { en: 'AC Repair & Servicing' }, icon: '‚ùÑÔ∏è',
                        subsubcategories: [
                            { name: { en: 'AC Servicing' }, icon: '‚ùÑÔ∏è' },
                            { name: { en: 'AC Installation' }, icon: 'üî©' },
                            { name: { en: 'AC Gas Refill' }, icon: 'üí®' },
                            { name: { en: 'AC Uninstallation' }, icon: 'üîß' }
                        ]
                    },
                    {
                        name: { en: 'Carpenter' }, icon: 'ü™µ',
                        subsubcategories: [
                            { name: { en: 'Furniture Repair' }, icon: 'ü™ë' },
                            { name: { en: 'Door/Window Repair' }, icon: 'üö™' },
                            { name: { en: 'Wood Polishing' }, icon: '‚ú®' },
                            { name: { en: 'Custom Furniture' }, icon: 'üõãÔ∏è' }
                        ]
                    },
                    {
                        name: { en: 'RO Repair & Installation' }, icon: 'üíß',
                        subsubcategories: [
                            { name: { en: 'RO Installation' }, icon: 'üíß' },
                            { name: { en: 'RO Service & Filter Change' }, icon: 'üîß' },
                            { name: { en: 'RO Repair' }, icon: 'üõ†Ô∏è' }
                        ]
                    },
                    {
                        name: { en: 'Geyser Repair' }, icon: 'üöø',
                        subsubcategories: [
                            { name: { en: 'Geyser Repair' }, icon: 'üîß' },
                            { name: { en: 'Geyser Installation' }, icon: 'üöø' },
                            { name: { en: 'Element Replacement' }, icon: '‚ö°' }
                        ]
                    },
                    {
                        name: { en: 'Inverter/Battery Service' }, icon: 'üîã',
                        subsubcategories: [
                            { name: { en: 'Inverter Repair' }, icon: 'üîã' },
                            { name: { en: 'Battery Replacement' }, icon: 'üîå' },
                            { name: { en: 'Solar Panel Service' }, icon: '‚òÄÔ∏è' }
                        ]
                    },
                    {
                        name: { en: 'CCTV Installation' }, icon: 'üì∑',
                        subsubcategories: [
                            { name: { en: 'CCTV Installation' }, icon: 'üì∑' },
                            { name: { en: 'CCTV Repair' }, icon: 'üîß' },
                            { name: { en: 'DVR/NVR Setup' }, icon: 'üñ•Ô∏è' }
                        ]
                    },
                    {
                        name: { en: 'Water Tank Cleaning' }, icon: 'üõ¢Ô∏è',
                        subsubcategories: [
                            { name: { en: 'Overhead Tank Cleaning' }, icon: 'üõ¢Ô∏è' },
                            { name: { en: 'Underground Tank Cleaning' }, icon: '‚¨áÔ∏è' },
                            { name: { en: 'Sump Cleaning' }, icon: 'ü™£' }
                        ]
                    },
                    {
                        name: { en: 'Pest Control' }, icon: 'üêú',
                        subsubcategories: [
                            { name: { en: 'Cockroach Treatment' }, icon: 'ü™≤' },
                            { name: { en: 'Termite Treatment' }, icon: 'üêõ' },
                            { name: { en: 'Mosquito Treatment' }, icon: 'ü¶ü' },
                            { name: { en: 'Rodent Control' }, icon: 'üêÄ' },
                            { name: { en: 'Bed Bug Treatment' }, icon: 'üõèÔ∏è' }
                        ]
                    },
                    {
                        name: { en: 'Painter' }, icon: 'üé®',
                        subsubcategories: [
                            { name: { en: 'Wall Painting' }, icon: 'üñåÔ∏è' },
                            { name: { en: 'Waterproofing' }, icon: 'üí¶' },
                            { name: { en: 'Texture Painting' }, icon: 'üé®' },
                            { name: { en: 'Exterior Painting' }, icon: 'üè†' }
                        ]
                    },
                    {
                        name: { en: 'Interior Designer' }, icon: 'üõãÔ∏è',
                        subsubcategories: [
                            { name: { en: 'Home Interior Design' }, icon: 'üè°' },
                            { name: { en: '3D Design Consultation' }, icon: 'üñ•Ô∏è' },
                            { name: { en: 'Office Interior' }, icon: 'üè¢' }
                        ]
                    },
                    {
                        name: { en: 'Modular Kitchen' }, icon: 'üç≥',
                        subsubcategories: [
                            { name: { en: 'Modular Kitchen Design' }, icon: 'üç≥' },
                            { name: { en: 'Kitchen Installation' }, icon: 'üî©' },
                            { name: { en: 'Kitchen Repair' }, icon: 'üîß' }
                        ]
                    }
                ]
            },
            {
                id: 'cat2',
                name: { en: 'Beauty & Wellness' },
                icon: 'üíÑ',
                subcategories: [
                    {
                        name: { en: 'Bridal Makeup' }, icon: 'üë∞',
                        subsubcategories: [
                            { name: { en: 'Bridal Makeup' }, icon: 'üíÑ' },
                            { name: { en: 'Engagement Makeup' }, icon: 'üíç' },
                            { name: { en: 'Party Makeup' }, icon: '‚ú®' }
                        ]
                    },
                    {
                        name: { en: 'Mehendi Artist' }, icon: 'üåø',
                        subsubcategories: [
                            { name: { en: 'Bridal Mehendi' }, icon: 'üë∞' },
                            { name: { en: 'Party Mehendi' }, icon: 'üéâ' },
                            { name: { en: 'Arabic Mehendi' }, icon: 'üåø' }
                        ]
                    },
                    {
                        name: { en: 'Home Salon Services' }, icon: 'üíÖ',
                        subsubcategories: [
                            { name: { en: 'Facial' }, icon: 'üßñ' },
                            { name: { en: 'Waxing' }, icon: '‚ú®' },
                            { name: { en: 'Threading' }, icon: 'üßµ' },
                            { name: { en: 'Pedicure & Manicure' }, icon: 'üíÖ' }
                        ]
                    },
                    {
                        name: { en: 'Hair Stylist at Home' }, icon: 'üíá',
                        subsubcategories: [
                            { name: { en: 'Haircut' }, icon: '‚úÇÔ∏è' },
                            { name: { en: 'Hair Colour' }, icon: 'üé®' },
                            { name: { en: 'Hair Treatment' }, icon: '‚ú®' },
                            { name: { en: 'Blow Dry & Setting' }, icon: 'üí®' }
                        ]
                    },
                    {
                        name: { en: 'Nail Artist' }, icon: 'üíÖ',
                        subsubcategories: [
                            { name: { en: 'Nail Extensions' }, icon: 'üíÖ' },
                            { name: { en: 'Nail Art' }, icon: 'üé®' },
                            { name: { en: 'Gel Nails' }, icon: '‚ú®' }
                        ]
                    },
                    {
                        name: { en: 'Men Grooming' }, icon: 'üíà',
                        subsubcategories: [
                            { name: { en: 'Haircut at Home' }, icon: '‚úÇÔ∏è' },
                            { name: { en: 'Beard Styling' }, icon: 'üßî' },
                            { name: { en: 'Facial for Men' }, icon: 'üßñ' }
                        ]
                    },
                    {
                        name: { en: 'Spa at Home' }, icon: 'üßò',
                        subsubcategories: [
                            { name: { en: 'Full Body Massage' }, icon: 'üíÜ' },
                            { name: { en: 'Head Massage' }, icon: 'üß†' },
                            { name: { en: 'Foot Massage' }, icon: 'ü¶∂' },
                            { name: { en: 'Aromatherapy' }, icon: 'üå∏' }
                        ]
                    },
                    {
                        name: { en: 'Fitness Trainer' }, icon: 'üèãÔ∏è',
                        subsubcategories: [
                            { name: { en: 'Personal Training at Home' }, icon: 'üèãÔ∏è' },
                            { name: { en: 'Weight Loss Program' }, icon: '‚öñÔ∏è' },
                            { name: { en: 'Strength Training' }, icon: 'üí™' }
                        ]
                    },
                    {
                        name: { en: 'Yoga Instructor' }, icon: 'üßò',
                        subsubcategories: [
                            { name: { en: 'Morning Yoga' }, icon: 'üåÖ' },
                            { name: { en: 'Meditation Sessions' }, icon: 'üßò' },
                            { name: { en: 'Prenatal Yoga' }, icon: 'ü§∞' }
                        ]
                    },
                    {
                        name: { en: 'Dietician' }, icon: 'ü•ó',
                        subsubcategories: [
                            { name: { en: 'Diet Consultation' }, icon: 'ü•ó' },
                            { name: { en: 'Weight Management Plan' }, icon: '‚öñÔ∏è' },
                            { name: { en: 'Disease-specific Diet' }, icon: 'üè•' }
                        ]
                    },
                    {
                        name: { en: 'Physiotherapist' }, icon: 'ü¶¥',
                        subsubcategories: [
                            { name: { en: 'Home Physiotherapy' }, icon: 'ü¶¥' },
                            { name: { en: 'Sports Injury Rehab' }, icon: '‚öΩ' },
                            { name: { en: 'Post-surgery Rehab' }, icon: 'üè•' }
                        ]
                    }
                ]
            },
            {
                id: 'cat3',
                name: { en: 'Cleaning Services' },
                icon: 'üßπ',
                subcategories: [
                    {
                        name: { en: 'Deep Home Cleaning' }, icon: 'üè†',
                        subsubcategories: [
                            { name: { en: 'Full Home Deep Clean' }, icon: 'üßπ' },
                            { name: { en: 'Bathroom Deep Clean' }, icon: 'üöø' },
                            { name: { en: 'Post-renovation Cleaning' }, icon: 'üî®' }
                        ]
                    },
                    {
                        name: { en: 'Sofa Cleaning' }, icon: 'üõãÔ∏è',
                        subsubcategories: [
                            { name: { en: 'Fabric Sofa Cleaning' }, icon: 'üõãÔ∏è' },
                            { name: { en: 'Leather Sofa Cleaning' }, icon: '‚ú®' },
                            { name: { en: 'Sofa Shampooing' }, icon: 'üß¥' }
                        ]
                    },
                    {
                        name: { en: 'Mattress Cleaning' }, icon: 'üõèÔ∏è',
                        subsubcategories: [
                            { name: { en: 'Mattress Deep Clean' }, icon: 'üõèÔ∏è' },
                            { name: { en: 'Mattress Sanitization' }, icon: 'üßº' }
                        ]
                    },
                    {
                        name: { en: 'Kitchen Deep Cleaning' }, icon: 'üç≥',
                        subsubcategories: [
                            { name: { en: 'Chimney Cleaning' }, icon: 'üå´Ô∏è' },
                            { name: { en: 'Stove & Burner Cleaning' }, icon: 'üî•' },
                            { name: { en: 'Full Kitchen Deep Clean' }, icon: 'üßπ' }
                        ]
                    },
                    {
                        name: { en: 'Marble Polishing' }, icon: '‚ú®',
                        subsubcategories: [
                            { name: { en: 'Floor Polishing' }, icon: '‚ú®' },
                            { name: { en: 'Granite Polishing' }, icon: 'ü™®' },
                            { name: { en: 'Anti-skid Treatment' }, icon: '‚ö†Ô∏è' }
                        ]
                    },
                    {
                        name: { en: 'Move-in/Move-out Cleaning' }, icon: 'üì¶',
                        subsubcategories: [
                            { name: { en: 'Move-in Cleaning' }, icon: 'üè†' },
                            { name: { en: 'Move-out Cleaning' }, icon: 'üì¶' },
                            { name: { en: 'Vacant Flat Cleaning' }, icon: 'üè¢' }
                        ]
                    }
                ]
            },
            {
                id: 'cat4',
                name: { en: 'Event Services' },
                icon: 'üéâ',
                subcategories: [
                    {
                        name: { en: 'Wedding Photographer' }, icon: 'üì∏',
                        subsubcategories: [
                            { name: { en: 'Wedding Photography' }, icon: 'üì∏' },
                            { name: { en: 'Pre-wedding Shoot' }, icon: 'üíï' },
                            { name: { en: 'Candid Photography' }, icon: 'üéûÔ∏è' }
                        ]
                    },
                    {
                        name: { en: 'Videographer' }, icon: 'üé•',
                        subsubcategories: [
                            { name: { en: 'Wedding Videography' }, icon: 'üé•' },
                            { name: { en: 'Cinematic Film' }, icon: 'üé¨' },
                            { name: { en: 'Drone Videography' }, icon: 'üöÅ' }
                        ]
                    },
                    {
                        name: { en: 'DJ Services' }, icon: 'üéß',
                        subsubcategories: [
                            { name: { en: 'Wedding DJ' }, icon: 'üéß' },
                            { name: { en: 'Party DJ' }, icon: 'üéâ' },
                            { name: { en: 'Sound System Rental' }, icon: 'üîä' }
                        ]
                    },
                    {
                        name: { en: 'Caterers' }, icon: 'üçΩÔ∏è',
                        subsubcategories: [
                            { name: { en: 'Wedding Catering' }, icon: 'üçΩÔ∏è' },
                            { name: { en: 'Birthday Catering' }, icon: 'üéÇ' },
                            { name: { en: 'Corporate Catering' }, icon: 'üè¢' },
                            { name: { en: 'Tiffin Service' }, icon: 'ü•°' }
                        ]
                    },
                    {
                        name: { en: 'Tent & Decoration' }, icon: 'üé™',
                        subsubcategories: [
                            { name: { en: 'Wedding Decoration' }, icon: 'üíê' },
                            { name: { en: 'Tent & Shamiana' }, icon: 'üé™' },
                            { name: { en: 'Stage Decoration' }, icon: 'üé≠' },
                            { name: { en: 'Flower Decoration' }, icon: 'üå∏' }
                        ]
                    },
                    {
                        name: { en: 'Birthday Party Planner' }, icon: 'üéÇ',
                        subsubcategories: [
                            { name: { en: 'Kids Birthday Planning' }, icon: 'üéà' },
                            { name: { en: 'Theme Party Setup' }, icon: 'üé†' },
                            { name: { en: 'Balloon Decoration' }, icon: 'üéà' }
                        ]
                    },
                    {
                        name: { en: 'Anchor / Emcee' }, icon: 'üé§',
                        subsubcategories: [
                            { name: { en: 'Wedding Anchor' }, icon: 'üíç' },
                            { name: { en: 'Corporate Emcee' }, icon: 'üè¢' },
                            { name: { en: 'Bilingual Anchor' }, icon: 'üåê' }
                        ]
                    },
                    {
                        name: { en: 'Band / Dhol' }, icon: 'ü•Å',
                        subsubcategories: [
                            { name: { en: 'Baraat Band' }, icon: 'üé∫' },
                            { name: { en: 'Dhol Players' }, icon: 'ü•Å' },
                            { name: { en: 'Brass Band' }, icon: 'üé∑' }
                        ]
                    },
                    {
                        name: { en: 'Folk Artists Booking' }, icon: 'üé≠',
                        subsubcategories: [
                            { name: { en: 'Kalbelia Dancers' }, icon: 'üíÉ' },
                            { name: { en: 'Kalbeliya Performers' }, icon: 'üé≠' },
                            { name: { en: 'Folk Music Group' }, icon: 'üé∂' },
                            { name: { en: 'Fire Show Artist' }, icon: 'üî•' }
                        ]
                    }
                ]
            },
            {
                id: 'cat5',
                name: { en: 'Travel & Transport' },
                icon: 'üöó',
                subcategories: [
                    {
                        name: { en: 'Taxi Booking' }, icon: 'üöï',
                        subsubcategories: [
                            { name: { en: 'Local Taxi' }, icon: 'üöï' },
                            { name: { en: 'Outstation Taxi' }, icon: 'üõ£Ô∏è' },
                            { name: { en: 'Airport Transfer' }, icon: '‚úàÔ∏è' }
                        ]
                    },
                    {
                        name: { en: 'Tempo Traveller Rental' }, icon: 'üöê',
                        subsubcategories: [
                            { name: { en: '9-Seater Tempo' }, icon: 'üöê' },
                            { name: { en: '12-Seater Tempo' }, icon: 'üöå' },
                            { name: { en: '17-Seater Tempo' }, icon: 'üöå' }
                        ]
                    },
                    {
                        name: { en: 'Car Rental with Driver' }, icon: 'üöó',
                        subsubcategories: [
                            { name: { en: 'Sedan Rental' }, icon: 'üöó' },
                            { name: { en: 'SUV Rental' }, icon: 'üöô' },
                            { name: { en: 'Luxury Car Rental' }, icon: 'üèéÔ∏è' }
                        ]
                    },
                    {
                        name: { en: 'Bike Rental' }, icon: 'üèçÔ∏è',
                        subsubcategories: [
                            { name: { en: 'Scooter Rental' }, icon: 'üõµ' },
                            { name: { en: 'Motorcycle Rental' }, icon: 'üèçÔ∏è' },
                            { name: { en: 'Royal Enfield Rental' }, icon: 'üèçÔ∏è' }
                        ]
                    },
                    {
                        name: { en: 'Local Tour Guide' }, icon: 'üó∫Ô∏è',
                        subsubcategories: [
                            { name: { en: 'City Tour Guide' }, icon: 'üèôÔ∏è' },
                            { name: { en: 'Heritage Walk Guide' }, icon: 'üèõÔ∏è' },
                            { name: { en: 'Multilingual Guide' }, icon: 'üåê' }
                        ]
                    },
                    {
                        name: { en: 'Desert Safari Booking' }, icon: 'üê™',
                        subsubcategories: [
                            { name: { en: 'Camel Safari' }, icon: 'üê™' },
                            { name: { en: 'Jeep Safari' }, icon: 'üöô' },
                            { name: { en: 'Overnight Desert Camp' }, icon: '‚õ∫' }
                        ]
                    },
                    {
                        name: { en: 'Driver on Demand' }, icon: 'üßë‚Äç‚úàÔ∏è',
                        subsubcategories: [
                            { name: { en: 'Personal Driver' }, icon: 'üßë‚Äç‚úàÔ∏è' },
                            { name: { en: 'Corporate Driver' }, icon: 'üíº' },
                            { name: { en: 'Night Driver' }, icon: 'üåô' }
                        ]
                    }
                ]
            },
            {
                id: 'cat6',
                name: { en: 'Real Estate & Property' },
                icon: 'üè¢',
                subcategories: [
                    {
                        name: { en: 'Property Dealer' }, icon: 'üè†',
                        subsubcategories: [
                            { name: { en: 'Residential Property' }, icon: 'üè°' },
                            { name: { en: 'Commercial Property' }, icon: 'üè¢' },
                            { name: { en: 'Land/Plot Dealing' }, icon: 'üåæ' }
                        ]
                    },
                    {
                        name: { en: 'Rental Listings' }, icon: 'üîë',
                        subsubcategories: [
                            { name: { en: 'Flat/Apartment Rental' }, icon: 'üè¢' },
                            { name: { en: 'PG Accommodation' }, icon: 'üõèÔ∏è' },
                            { name: { en: 'Shop/Office Rental' }, icon: 'üè™' }
                        ]
                    },
                    {
                        name: { en: 'Packers & Movers' }, icon: 'üì¶',
                        subsubcategories: [
                            { name: { en: 'Home Shifting' }, icon: 'üè†' },
                            { name: { en: 'Office Relocation' }, icon: 'üè¢' },
                            { name: { en: 'Vehicle Transportation' }, icon: 'üöó' }
                        ]
                    },
                    {
                        name: { en: 'Marble/Stone Contractor' }, icon: 'ü™®',
                        subsubcategories: [
                            { name: { en: 'Marble Flooring' }, icon: 'ü™®' },
                            { name: { en: 'Granite Work' }, icon: 'üèóÔ∏è' },
                            { name: { en: 'Stone Cladding' }, icon: 'üß±' }
                        ]
                    }
                ]
            },
            {
                id: 'cat7',
                name: { en: 'Education & Skill Services' },
                icon: 'üìö',
                subcategories: [
                    {
                        name: { en: 'Home Tutor' }, icon: 'üìñ',
                        subsubcategories: [
                            { name: { en: 'Primary School Tutor' }, icon: '‚úèÔ∏è' },
                            { name: { en: 'Secondary School Tutor' }, icon: 'üìê' },
                            { name: { en: 'Science & Math Tutor' }, icon: 'üî¨' },
                            { name: { en: 'Commerce Tutor' }, icon: 'üíπ' }
                        ]
                    },
                    {
                        name: { en: 'Spoken English Trainer' }, icon: 'üó£Ô∏è',
                        subsubcategories: [
                            { name: { en: 'Basic Spoken English' }, icon: 'üó£Ô∏è' },
                            { name: { en: 'Business English' }, icon: 'üíº' },
                            { name: { en: 'IELTS / TOEFL Coaching' }, icon: 'üìù' }
                        ]
                    },
                    {
                        name: { en: 'Competitive Exam Tutor' }, icon: 'üèÜ',
                        subsubcategories: [
                            { name: { en: 'UPSC Coaching' }, icon: 'üèõÔ∏è' },
                            { name: { en: 'REET / RPSC Coaching' }, icon: 'üìã' },
                            { name: { en: 'SSC / Railway Coaching' }, icon: 'üöÇ' },
                            { name: { en: 'JEE / NEET Coaching' }, icon: 'üî¨' }
                        ]
                    },
                    {
                        name: { en: 'Dance Teacher' }, icon: 'üíÉ',
                        subsubcategories: [
                            { name: { en: 'Classical Dance' }, icon: 'üíÉ' },
                            { name: { en: 'Bollywood Dance' }, icon: 'üé¨' },
                            { name: { en: 'Western Dance' }, icon: 'üï∫' },
                            { name: { en: 'Folk Dance' }, icon: 'üé≠' }
                        ]
                    },
                    {
                        name: { en: 'Music Teacher' }, icon: 'üéµ',
                        subsubcategories: [
                            { name: { en: 'Guitar Classes' }, icon: 'üé∏' },
                            { name: { en: 'Keyboard / Piano' }, icon: 'üéπ' },
                            { name: { en: 'Vocals / Singing' }, icon: 'üé§' },
                            { name: { en: 'Tabla / Harmonium' }, icon: 'ü•Å' }
                        ]
                    }
                ]
            },
            {
                id: 'cat8',
                name: { en: 'Business & Professional Services' },
                icon: 'üíº',
                subcategories: [
                    {
                        name: { en: 'CA / Tax Filing' }, icon: 'üìä',
                        subsubcategories: [
                            { name: { en: 'ITR Filing' }, icon: 'üìã' },
                            { name: { en: 'GST Registration & Filing' }, icon: 'üßæ' },
                            { name: { en: 'Business Accounting' }, icon: 'üìä' },
                            { name: { en: 'Audit Services' }, icon: 'üîç' }
                        ]
                    },
                    {
                        name: { en: 'Legal Advisor' }, icon: '‚öñÔ∏è',
                        subsubcategories: [
                            { name: { en: 'Property Legal Help' }, icon: 'üè†' },
                            { name: { en: 'Family Law / Divorce' }, icon: 'üë®‚Äçüë©‚Äçüëß' },
                            { name: { en: 'Business Legal Services' }, icon: 'üíº' },
                            { name: { en: 'Documentation Help' }, icon: 'üìÑ' }
                        ]
                    },
                    {
                        name: { en: 'Website Developer' }, icon: 'üíª',
                        subsubcategories: [
                            { name: { en: 'Business Website' }, icon: 'üåê' },
                            { name: { en: 'E-commerce Website' }, icon: 'üõí' },
                            { name: { en: 'App Development' }, icon: 'üì±' }
                        ]
                    },
                    {
                        name: { en: 'Graphic Designer' }, icon: 'üé®',
                        subsubcategories: [
                            { name: { en: 'Logo Design' }, icon: 'üéØ' },
                            { name: { en: 'Brochure / Flyer Design' }, icon: 'üì∞' },
                            { name: { en: 'Banner & Poster Design' }, icon: 'üñºÔ∏è' }
                        ]
                    },
                    {
                        name: { en: 'Social Media Manager' }, icon: 'üì±',
                        subsubcategories: [
                            { name: { en: 'Instagram Management' }, icon: 'üì∏' },
                            { name: { en: 'Facebook Marketing' }, icon: 'üëç' },
                            { name: { en: 'Content Creation' }, icon: '‚úçÔ∏è' },
                            { name: { en: 'Paid Ads Management' }, icon: 'üí∞' }
                        ]
                    },
                    {
                        name: { en: 'Wedding Invitation Designer' }, icon: 'üíå',
                        subsubcategories: [
                            { name: { en: 'Digital Invitations' }, icon: 'üì±' },
                            { name: { en: 'Printed Card Design' }, icon: 'üñ®Ô∏è' },
                            { name: { en: 'Video Invitations' }, icon: 'üé•' }
                        ]
                    }
                ]
            },
            {
                id: 'cat9',
                name: { en: 'Pet Services' },
                icon: 'üêæ',
                subcategories: [
                    {
                        name: { en: 'Pet Grooming' }, icon: 'üê∂',
                        subsubcategories: [
                            { name: { en: 'Dog Grooming at Home' }, icon: 'üêï' },
                            { name: { en: 'Cat Grooming' }, icon: 'üê±' },
                            { name: { en: 'Bath & Blow Dry' }, icon: 'üöø' }
                        ]
                    },
                    {
                        name: { en: 'Pet Boarding' }, icon: 'üè†',
                        subsubcategories: [
                            { name: { en: 'Dog Boarding' }, icon: 'üêï' },
                            { name: { en: 'Cat Boarding' }, icon: 'üê±' },
                            { name: { en: 'Home-based Pet Sitting' }, icon: 'üè°' }
                        ]
                    },
                    {
                        name: { en: 'Dog Training' }, icon: 'ü¶Æ',
                        subsubcategories: [
                            { name: { en: 'Basic Obedience Training' }, icon: 'ü¶Æ' },
                            { name: { en: 'Advanced Training' }, icon: 'üèÜ' },
                            { name: { en: 'Puppy Training' }, icon: 'üê∂' }
                        ]
                    },
                    {
                        name: { en: 'Vet on Call' }, icon: 'üè•',
                        subsubcategories: [
                            { name: { en: 'Home Visit Vet' }, icon: 'üè•' },
                            { name: { en: 'Vaccination at Home' }, icon: 'üíâ' },
                            { name: { en: 'Online Vet Consultation' }, icon: 'üíª' }
                        ]
                    }
                ]
            }
        ]; // end DEFAULT_CATEGORIES

        // ==================== CATEGORY MERGE FUNCTION ====================
        // Merges DEFAULT_CATEGORIES into saved categories:
        //   - New top-level categories are APPENDED (never removed)
        //   - New subcategories inside existing categories are APPENDED
        //   - New service types inside existing subcategories are APPENDED
        //   - Anything the admin added/edited/deleted is PRESERVED
        function mergeCategories(saved, defaults) {
            const merged = [...saved]; // start from what's saved

            defaults.forEach(defCat => {
                // Match by id first, then by English name as fallback
                const existingCat = merged.find(c =>
                    (c.id && defCat.id && c.id === defCat.id) ||
                    ((c.name?.en || c.name) === (defCat.name?.en || defCat.name))
                );

                if (!existingCat) {
                    // Brand-new category ‚Äî append it whole
                    merged.push(defCat);
                } else {
                    // Category exists ‚Äî merge subcategories
                    if (!existingCat.subcategories) existingCat.subcategories = [];
                    const existingSubs = existingCat.subcategories;

                    (defCat.subcategories || []).forEach(defSub => {
                        const existingSub = existingSubs.find(s =>
                            (s.name?.en || s.name) === (defSub.name?.en || defSub.name)
                        );

                        if (!existingSub) {
                            // New subcategory ‚Äî append it whole
                            existingSubs.push(defSub);
                        } else {
                            // Subcategory exists ‚Äî merge service types
                            if (!existingSub.subsubcategories) existingSub.subsubcategories = [];
                            const existingServices = existingSub.subsubcategories;

                            (defSub.subsubcategories || []).forEach(defService => {
                                const alreadyExists = existingServices.some(sv =>
                                    (sv.name?.en || sv.name) === (defService.name?.en || defService.name)
                                );
                                if (!alreadyExists) {
                                    // New service type ‚Äî append it
                                    existingServices.push(defService);
                                }
                                // If it exists: leave it exactly as the admin has it
                            });
                        }
                    });
                }
            });

            return merged;
        }

        // ==================== LOAD & AUTO-MERGE CATEGORIES ====================
        (function initCategories() {
            const savedVersion   = parseInt(localStorage.getItem('categoryVersion') || '0');
            const savedRaw       = localStorage.getItem('categories');

            if (!savedRaw) {
                // First ever load ‚Äî just use defaults as-is
                localStorage.setItem('categories', JSON.stringify(DEFAULT_CATEGORIES));
                localStorage.setItem('categoryVersion', String(CATEGORY_VERSION));
                console.log('‚úÖ Categories: first load, defaults applied.');
            } else if (savedVersion < CATEGORY_VERSION) {
                // New version detected ‚Äî merge new defaults into saved data
                const saved  = JSON.parse(savedRaw);
                const merged = mergeCategories(saved, DEFAULT_CATEGORIES);
                localStorage.setItem('categories', JSON.stringify(merged));
                localStorage.setItem('categoryVersion', String(CATEGORY_VERSION));
                console.log(`‚úÖ Categories: merged from v${savedVersion} ‚Üí v${CATEGORY_VERSION}. Total categories: ${merged.length}`);
            } else {
                console.log(`‚úÖ Categories: already at v${CATEGORY_VERSION}, no merge needed.`);
            }
        })();

        // Live working array ‚Äî loaded from Firebase on init
        let categories = [];

        // ITI courses master data ‚Äî seeded to Firebase on first run;
const ITI_CATEGORIES = [{"id": "cat_engineering", "name": {"en": "Engineering & Mechanical"}, "icon": "üîß", "subcategories": [{"name": {"en": "Machining & Fabrication"}, "icon": "‚öôÔ∏è", "subsubcategories": [{"name": {"en": "Fitter"}, "icon": "üîß"}, {"name": {"en": "Machinist"}, "icon": "‚öôÔ∏è"}, {"name": {"en": "Machinist Grinder"}, "icon": "‚öôÔ∏è"}, {"name": {"en": "Turner"}, "icon": "üî©"}, {"name": {"en": "CNC Machining Technician"}, "icon": "üñ•Ô∏è"}, {"name": {"en": "Operator Advanced Machine Tool"}, "icon": "üè≠"}, {"name": {"en": "Tool & Die Maker (Dies & Moulds)"}, "icon": "üî®"}, {"name": {"en": "Tool & Die Maker (Press Tools, Jigs & Fixtures)"}, "icon": "üî®"}, {"name": {"en": "Sheet Metal Worker"}, "icon": "ü™õ"}, {"name": {"en": "Foundryman"}, "icon": "üè≠"}, {"name": {"en": "Mechanic Machine Tool Maintenance"}, "icon": "üîß"}]}, {"name": {"en": "Welding"}, "icon": "üî•", "subsubcategories": [{"name": {"en": "Welder"}, "icon": "üî•"}, {"name": {"en": "Welder (Fabrication & Fitting)"}, "icon": "üî•"}, {"name": {"en": "Welder (GMAW & GTAW)"}, "icon": "üî•"}, {"name": {"en": "Welder (Pipe)"}, "icon": "üî•"}, {"name": {"en": "Welder (Structural)"}, "icon": "üî•"}, {"name": {"en": "Welder (Welding & Inspection)"}, "icon": "üî•"}]}, {"name": {"en": "Industrial & Manufacturing"}, "icon": "üè≠", "subsubcategories": [{"name": {"en": "Industrial Robotics & Digital Manufacturing Technician"}, "icon": "ü§ñ"}, {"name": {"en": "Manufacturing Process Control and Automation Technician"}, "icon": "üè≠"}, {"name": {"en": "Technician Mechatronics"}, "icon": "‚öôÔ∏è"}, {"name": {"en": "Plastic Processing Operator"}, "icon": "üè≠"}, {"name": {"en": "Rubber Technician"}, "icon": "üè≠"}, {"name": {"en": "Refractory Technician"}, "icon": "üè≠"}, {"name": {"en": "Engineering Design Technician"}, "icon": "üìê"}, {"name": {"en": "Additive Manufacturing Technician (3D Printing)"}, "icon": "üñ®Ô∏è"}, {"name": {"en": "Virtual Analysis and Designer"}, "icon": "üíª"}]}, {"name": {"en": "Draughting & Surveying"}, "icon": "üìê", "subsubcategories": [{"name": {"en": "Draughtsman (Civil)"}, "icon": "üìê"}, {"name": {"en": "Draughtsman Mechanical"}, "icon": "üìê"}, {"name": {"en": "Architectural Draughtsman"}, "icon": "üèõÔ∏è"}, {"name": {"en": "Surveyor"}, "icon": "üó∫Ô∏è"}, {"name": {"en": "GEO - Informatics Assistant"}, "icon": "üó∫Ô∏è"}, {"name": {"en": "Civil Engineering Assistant"}, "icon": "üèóÔ∏è"}]}]}, {"id": "cat_electrical", "name": {"en": "Electrical & Electronics"}, "icon": "‚ö°", "subcategories": [{"name": {"en": "Electrical"}, "icon": "‚ö°", "subsubcategories": [{"name": {"en": "Electrician"}, "icon": "‚ö°"}, {"name": {"en": "Electrician - Power Distribution"}, "icon": "üîå"}, {"name": {"en": "Wireman"}, "icon": "üîå"}, {"name": {"en": "Technician Power Electronics Systems"}, "icon": "‚ö°"}, {"name": {"en": "Lift and Escalator Mechanic"}, "icon": "üõó"}, {"name": {"en": "Pump Operator Cum Mechanic"}, "icon": "üíß"}]}, {"name": {"en": "Electronics & Instruments"}, "icon": "üìª", "subsubcategories": [{"name": {"en": "Electronics Mechanic"}, "icon": "üìª"}, {"name": {"en": "Instrument Mechanic"}, "icon": "üéõÔ∏è"}, {"name": {"en": "Instrument Mechanic (Chemical Plant)"}, "icon": "üéõÔ∏è"}, {"name": {"en": "Technician Electronics System Design and Repair"}, "icon": "üîß"}, {"name": {"en": "Technician Medical Electronics"}, "icon": "üè•"}, {"name": {"en": "Mechanic Consumer Electronic Appliances"}, "icon": "üì∫"}, {"name": {"en": "Semiconductor Technician"}, "icon": "üí°"}]}, {"name": {"en": "Renewable & Green Energy"}, "icon": "üåû", "subsubcategories": [{"name": {"en": "Solar Technician (Electrical)"}, "icon": "‚òÄÔ∏è"}, {"name": {"en": "Wind Plant Technician"}, "icon": "üí®"}, {"name": {"en": "Small Hydro Power Plant Technician"}, "icon": "üíß"}, {"name": {"en": "Green Hydrogen Production Technician"}, "icon": "üåø"}]}, {"name": {"en": "Telecom & Networking"}, "icon": "üì°", "subsubcategories": [{"name": {"en": "5G Network Technician"}, "icon": "üì∂"}, {"name": {"en": "Fiber To Home Technician"}, "icon": "üåê"}, {"name": {"en": "Information & Communication Technology System Maintenance (ICTSM)"}, "icon": "üì°"}, {"name": {"en": "Computer Hardware & Network Maintenance"}, "icon": "üñ•Ô∏è"}]}]}, {"id": "cat_it", "name": {"en": "IT & Computers"}, "icon": "üíª", "subcategories": [{"name": {"en": "Programming & Software"}, "icon": "üë®‚Äçüíª", "subsubcategories": [{"name": {"en": "Computer Operator and Programming Assistant (COPA)"}, "icon": "üíª"}, {"name": {"en": "Information Technology"}, "icon": "üñ•Ô∏è"}, {"name": {"en": "Software Testing Assistant"}, "icon": "üß™"}, {"name": {"en": "Artificial Intelligence Programming Assistant"}, "icon": "ü§ñ"}, {"name": {"en": "Database System Assistant"}, "icon": "üóÑÔ∏è"}, {"name": {"en": "Data Entry Operator"}, "icon": "‚å®Ô∏è"}, {"name": {"en": "Data Annotation Assistant"}, "icon": "üè∑Ô∏è"}, {"name": {"en": "Computer Aided Manufacturing (CAM) Programmer"}, "icon": "üñ•Ô∏è"}]}, {"name": {"en": "Cyber & Security"}, "icon": "üîê", "subsubcategories": [{"name": {"en": "Cyber Security Assistant"}, "icon": "üîê"}, {"name": {"en": "Smartphone Technician Cum App Tester"}, "icon": "üì±"}]}, {"name": {"en": "Design & Media"}, "icon": "üé®", "subsubcategories": [{"name": {"en": "Desktop Publishing Operator"}, "icon": "üñ®Ô∏è"}, {"name": {"en": "Multimedia, Animation & Special Effects"}, "icon": "üé¨"}, {"name": {"en": "Digital Photographer"}, "icon": "üì∑"}, {"name": {"en": "Photographer"}, "icon": "üì∏"}, {"name": {"en": "Video Cameraman"}, "icon": "üé•"}]}, {"name": {"en": "IoT & Smart Tech"}, "icon": "üåê", "subsubcategories": [{"name": {"en": "Industrial IoT Technician"}, "icon": "üè≠"}, {"name": {"en": "IoT Technician (Smart Agriculture)"}, "icon": "üåæ"}, {"name": {"en": "IoT Technician (Smart City)"}, "icon": "üèôÔ∏è"}, {"name": {"en": "IoT Technician (Smart Healthcare)"}, "icon": "üè•"}]}, {"name": {"en": "Drones & Aviation"}, "icon": "üöÅ", "subsubcategories": [{"name": {"en": "Drone Pilot (Junior)"}, "icon": "üöÅ"}, {"name": {"en": "Drone Technician"}, "icon": "üîß"}, {"name": {"en": "Aeronautical Structure and Equipment Fitter"}, "icon": "‚úàÔ∏è"}]}]}, {"id": "cat_automotive", "name": {"en": "Automotive & Transport"}, "icon": "üöó", "subcategories": [{"name": {"en": "Vehicle Mechanics"}, "icon": "üîß", "subsubcategories": [{"name": {"en": "Mechanic Motor Vehicle (MMV)"}, "icon": "üöó"}, {"name": {"en": "Mechanic Two and Three Wheeler"}, "icon": "üèçÔ∏è"}, {"name": {"en": "Mechanic Diesel"}, "icon": "‚õΩ"}, {"name": {"en": "Mechanic Tractor"}, "icon": "üöú"}, {"name": {"en": "Mechanic Electric Vehicle"}, "icon": "üîã"}, {"name": {"en": "Driver cum Mechanic (LMV)"}, "icon": "üöò"}, {"name": {"en": "Mechanic Agricultural Machinery"}, "icon": "üöú"}]}, {"name": {"en": "Auto Body & Paint"}, "icon": "üé®", "subsubcategories": [{"name": {"en": "Mechanic Auto Body Painting"}, "icon": "üé®"}, {"name": {"en": "Mechanic Auto Body Repair"}, "icon": "üî®"}, {"name": {"en": "Mechanic Auto Electrical and Electronics"}, "icon": "‚ö°"}]}, {"name": {"en": "Marine & Logistics"}, "icon": "‚öì", "subsubcategories": [{"name": {"en": "Marine Engine Fitter"}, "icon": "‚öì"}, {"name": {"en": "Marine Fitter"}, "icon": "‚öì"}, {"name": {"en": "Vessel Navigator"}, "icon": "üö¢"}, {"name": {"en": "In Plant Logistics Assistant"}, "icon": "üì¶"}, {"name": {"en": "Warehouse Technician"}, "icon": "üè≠"}]}]}, {"id": "cat_construction", "name": {"en": "Construction & Home Services"}, "icon": "üè†", "subcategories": [{"name": {"en": "Plumbing & Sanitation"}, "icon": "ü™†", "subsubcategories": [{"name": {"en": "Plumber"}, "icon": "ü™†"}, {"name": {"en": "Health Sanitary Inspector"}, "icon": "üè•"}]}, {"name": {"en": "Painting & Finishing"}, "icon": "üñåÔ∏è", "subsubcategories": [{"name": {"en": "Painter (General)"}, "icon": "üñåÔ∏è"}, {"name": {"en": "Domestic Painter"}, "icon": "üñåÔ∏è"}, {"name": {"en": "Industrial Painter"}, "icon": "üè≠"}, {"name": {"en": "Electroplater"}, "icon": "‚ú®"}]}, {"name": {"en": "Masonry & Civil"}, "icon": "üß±", "subsubcategories": [{"name": {"en": "Mason (Building Constructor)"}, "icon": "üß±"}, {"name": {"en": "Interior Design & Decoration"}, "icon": "üõãÔ∏è"}, {"name": {"en": "Floriculture & Landscaping"}, "icon": "üå∏"}]}, {"name": {"en": "Refrigeration & AC"}, "icon": "‚ùÑÔ∏è", "subsubcategories": [{"name": {"en": "Refrigeration and Air Conditioning Technician"}, "icon": "‚ùÑÔ∏è"}, {"name": {"en": "Central Air Condition Plant Mechanic"}, "icon": "üå¨Ô∏è"}]}, {"name": {"en": "Fire & Safety"}, "icon": "üî•", "subsubcategories": [{"name": {"en": "Fire Technology and Industrial Safety Management"}, "icon": "üöí"}, {"name": {"en": "Fireman"}, "icon": "üë®‚Äçüöí"}, {"name": {"en": "Health, Safety and Environment"}, "icon": "ü¶∫"}]}]}, {"id": "cat_fashion", "name": {"en": "Fashion & Textiles"}, "icon": "üëó", "subcategories": [{"name": {"en": "Garment Making"}, "icon": "‚úÇÔ∏è", "subsubcategories": [{"name": {"en": "Sewing Technology"}, "icon": "üßµ"}, {"name": {"en": "Dress Making (DM)"}, "icon": "üëó"}, {"name": {"en": "Fashion Design and Technology (FD&T)"}, "icon": "üë†"}, {"name": {"en": "Cutting & Sewing (VI & OD)"}, "icon": "‚úÇÔ∏è"}, {"name": {"en": "Computer Aided Embroidery & Designing"}, "icon": "üíª"}]}, {"name": {"en": "Weaving & Textiles"}, "icon": "üß∂", "subsubcategories": [{"name": {"en": "Weaving Technician"}, "icon": "üß∂"}, {"name": {"en": "Weaving Technician for Silk & Woolen Fabrics"}, "icon": "üß∂"}, {"name": {"en": "Spinning Technician"}, "icon": "üåÄ"}, {"name": {"en": "Textile Mechatronics"}, "icon": "‚öôÔ∏è"}, {"name": {"en": "Textile Wet Processing Technician"}, "icon": "üíß"}, {"name": {"en": "Carpet Weaving Artisan - Handloom"}, "icon": "ü™¢"}]}, {"name": {"en": "Embroidery & Artisan"}, "icon": "ü™°", "subsubcategories": [{"name": {"en": "Hand Embroidery Artisan"}, "icon": "ü™°"}, {"name": {"en": "Surface Ornamentation Techniques (Embroidery)"}, "icon": "üå∏"}, {"name": {"en": "Traditional Phulkari Artisan"}, "icon": "üå∫"}, {"name": {"en": "Shawl Weaving Artisan"}, "icon": "üß£"}]}, {"name": {"en": "Leather & Footwear"}, "icon": "üëû", "subsubcategories": [{"name": {"en": "Footwear Maker"}, "icon": "üëü"}, {"name": {"en": "Leather Goods Maker"}, "icon": "üëú"}]}]}, {"id": "cat_hospitality", "name": {"en": "Hospitality & Food"}, "icon": "üçΩÔ∏è", "subcategories": [{"name": {"en": "Food Production"}, "icon": "üë®‚Äçüç≥", "subsubcategories": [{"name": {"en": "Baker & Confectioner"}, "icon": "ü•ê"}, {"name": {"en": "Food Production (General)"}, "icon": "üç±"}, {"name": {"en": "Food and Beverage Service Assistant"}, "icon": "üçΩÔ∏è"}, {"name": {"en": "Food Beverage"}, "icon": "ü•§"}, {"name": {"en": "Catering & Hospitality Assistant"}, "icon": "üç¥"}, {"name": {"en": "Fruits and Vegetables Processing"}, "icon": "ü•¶"}]}, {"name": {"en": "Hotel & Front Office"}, "icon": "üè®", "subsubcategories": [{"name": {"en": "Front Office Assistant"}, "icon": "üè®"}, {"name": {"en": "Housekeeper"}, "icon": "üßπ"}, {"name": {"en": "Hospital Housekeeping"}, "icon": "üè•"}]}, {"name": {"en": "Tourism & Travel"}, "icon": "‚úàÔ∏è", "subsubcategories": [{"name": {"en": "Tourist Guide"}, "icon": "üó∫Ô∏è"}, {"name": {"en": "Travel & Tour Assistant"}, "icon": "‚úàÔ∏è"}]}, {"name": {"en": "Beauty & Wellness"}, "icon": "üíÖ", "subsubcategories": [{"name": {"en": "Cosmetology"}, "icon": "üíÑ"}, {"name": {"en": "Hair & Skin Care (VI)"}, "icon": "üíá"}, {"name": {"en": "Spa Therapy"}, "icon": "üíÜ"}]}]}, {"id": "cat_agriculture", "name": {"en": "Agriculture & Environment"}, "icon": "üåæ", "subcategories": [{"name": {"en": "Farming & Horticulture"}, "icon": "üå±", "subsubcategories": [{"name": {"en": "Horticulture"}, "icon": "üå∏"}, {"name": {"en": "Nursery & Orchard Technician"}, "icon": "üå≥"}, {"name": {"en": "Floriculture & Landscaping"}, "icon": "üå∫"}, {"name": {"en": "Agro Processing"}, "icon": "üåæ"}, {"name": {"en": "Soil Testing and Crop Technician"}, "icon": "üß™"}]}, {"name": {"en": "Dairy & Food Tech"}, "icon": "ü•õ", "subsubcategories": [{"name": {"en": "Dairying"}, "icon": "üêÑ"}, {"name": {"en": "Milk and Milk Product Technician"}, "icon": "ü•õ"}, {"name": {"en": "Honey Processing Technician"}, "icon": "üçØ"}]}, {"name": {"en": "Mining & Stone"}, "icon": "‚õèÔ∏è", "subsubcategories": [{"name": {"en": "Stone Mining Machine Operator"}, "icon": "‚õèÔ∏è"}, {"name": {"en": "Stone Processing Machine Operator"}, "icon": "ü™®"}, {"name": {"en": "Mechanic Mining Machinery"}, "icon": "üèóÔ∏è"}]}]}, {"id": "cat_health", "name": {"en": "Health & Medical"}, "icon": "üè•", "subcategories": [{"name": {"en": "Medical Technicians"}, "icon": "ü©∫", "subsubcategories": [{"name": {"en": "Physiotherapy Technician"}, "icon": "ü¶Ω"}, {"name": {"en": "Radiology Technician"}, "icon": "ü©ª"}, {"name": {"en": "Dental Laboratory Equipment Technician"}, "icon": "ü¶∑"}, {"name": {"en": "Technician Medical Electronics"}, "icon": "üíâ"}]}, {"name": {"en": "Care & Support"}, "icon": "ü§ù", "subsubcategories": [{"name": {"en": "Geriatric (Old Age) Care"}, "icon": "üë¥"}, {"name": {"en": "Early Childhood Educator"}, "icon": "üë∂"}]}, {"name": {"en": "Chemical & Lab"}, "icon": "üß™", "subsubcategories": [{"name": {"en": "Laboratory Assistant (Chemical Plant)"}, "icon": "üß™"}, {"name": {"en": "Attendant Operator (Chemical Plant)"}, "icon": "üè≠"}, {"name": {"en": "Maintenance Mechanic (Chemical Plant)"}, "icon": "üîß"}]}]}, {"id": "cat_arts", "name": {"en": "Arts, Crafts & Media"}, "icon": "üé®", "subcategories": [{"name": {"en": "Visual Arts & Crafts"}, "icon": "üñºÔ∏è", "subsubcategories": [{"name": {"en": "Basohli Painting Artist"}, "icon": "üñºÔ∏è"}, {"name": {"en": "Papier Mache Artisan"}, "icon": "üé≠"}, {"name": {"en": "Wood Carving Artisan"}, "icon": "ü™µ"}, {"name": {"en": "Bamboo Works"}, "icon": "üéã"}]}, {"name": {"en": "Wood & Furniture"}, "icon": "ü™µ", "subsubcategories": [{"name": {"en": "Wood Work Technician"}, "icon": "ü™µ"}, {"name": {"en": "Mechanic Lens/Prism Grinding"}, "icon": "üî¨"}]}, {"name": {"en": "Media & Photography"}, "icon": "üì∏", "subsubcategories": [{"name": {"en": "Photographer"}, "icon": "üì∏"}, {"name": {"en": "Digital Photographer"}, "icon": "üì∑"}, {"name": {"en": "Video Cameraman"}, "icon": "üé•"}, {"name": {"en": "Multimedia, Animation & Special Effects"}, "icon": "üé¨"}]}]}, {"id": "cat_business", "name": {"en": "Business & Office"}, "icon": "üíº", "subcategories": [{"name": {"en": "Office Administration"}, "icon": "üóÇÔ∏è", "subsubcategories": [{"name": {"en": "Secretarial Practice (English)"}, "icon": "üìù"}, {"name": {"en": "Stenographer Secretarial Assistant (English)"}, "icon": "üìù"}, {"name": {"en": "Stenographer Secretarial Assistant (Hindi)"}, "icon": "üìù"}, {"name": {"en": "Desktop Publishing Operator"}, "icon": "üñ®Ô∏è"}, {"name": {"en": "Data Entry Operator"}, "icon": "‚å®Ô∏è"}]}, {"name": {"en": "Finance & HR"}, "icon": "üí∞", "subsubcategories": [{"name": {"en": "Finance Executive"}, "icon": "üí∞"}, {"name": {"en": "Human Resource Executive"}, "icon": "üë•"}, {"name": {"en": "Marketing Executive"}, "icon": "üìä"}]}]}];

window.showCurrent = async function() {
  const log = document.getElementById('log');
  log.textContent = '‚è≥ Loading...\n';
  const snap = await get(ref(db, 'categories'));
  if (!snap.exists()) { log.textContent += '‚ö†Ô∏è Nothing in Firebase!'; return; }
  const cats = snap.val();
  log.textContent += 'Found ' + cats.length + ' categories currently:\n\n';
  cats.forEach(c => log.textContent += '  üìÅ ' + (c.name?.en || c.name) + '\n');
};

window.restoreAndMerge = async function() {
  const log = document.getElementById('log');
  log.textContent = '‚è≥ Merging all categories...\n\n';
  try {
    // Start with all 9 original categories
    let merged = [...OLD_CATEGORIES];
    log.textContent += '‚úÖ Original categories (' + OLD_CATEGORIES.length + '):\n';
    OLD_CATEGORIES.forEach(c => log.textContent += '  üìÅ ' + (c.name?.en || c.name) + '\n');

    // Add all 11 ITI categories
    log.textContent += '\n‚úÖ Adding ITI categories (' + ITI_CATEGORIES.length + '):\n';
    ITI_CATEGORIES.forEach(newCat => {
      const exists = merged.find(e => e.id === newCat.id);
      if (!exists) {
        merged.push(newCat);
        log.textContent += '  üìÅ ' + newCat.name.en + '\n';
      }
    });

    log.textContent += '\n‚è≥ Saving ' + merged.length + ' categories to Firebase...\n';
    await set(ref(db, 'categories'), merged);
    log.textContent += '\nüéâ DONE! ' + merged.length + ' categories now live for ALL users!';
    log.textContent += '\n\nClose this page and check your app ‚úÖ';
  } catch(e) {
    log.textContent += '\n‚ùå ERROR: ' + e.message;
  }
};
</script>
</body>
</html>
